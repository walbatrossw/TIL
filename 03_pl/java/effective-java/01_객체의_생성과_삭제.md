
# 객체의 생성과 삭제

## Rule 1. 생성자 대신 정적 팩터리 메서드를 사용할 수 없는지 생각해 보라.

클래스를 통해 객체를 만드는 일반적인 방법은 `public`으로 선언된 생성자를 이용하는 것이다. 그러나 반드시 프로그래머가 알아야하는 방법이 한가지 더 있는데 그 것은 클래스에 `public`으로 선언된 **정적 팩터리 메서드(static factory method)** 를 추가하는 방법이다. 여기서 말하는 정적 패터리 메서드는 디자인 패턴에 등장하는 팩터리 메서드와 개념이 다르다.

클래스를 정의할 때 생성자 대신 또는 생성자와 별도로 정적 팩터리 메서드를 제공함으로써 생기는 장점과 단점은 아래와 같다.

#### 장점

##### 1) 생성자와 달리 정적 팩터리 메서드는 이름이 있다.
- 생성자에 전달되는 인자들은 어떤 객체가 생성되는지 설명하지 못한다. 하지만 정적 팩터리 메서드는 이름만 잘 짓기만한다면 사용하기도 쉽고, 클라이언트 코드의 가독성도 높아진다.
- 클래스에는 시그니처별로 하나의 생성자만 넣을 수 있다. 이러한 제약을 피하기 위해 인자의 순서를 바꾸는 방법이 있지만 사용자 입장에서는 각각의 생성자의 용도를 기억하지 못할뿐더러 엉뚱한 생성자를 호출할 가능성이 발생할 수 있다.
- 같은 시그니처를 갖는 생성자를 여러개 정의해야할 필요가 있다면 정적 팩터리 메서드로 바꾸고, 메서드 이름을 통해 차이가 드러나게 하도록 하자.

##### 2) 생성자와 달리 호출할 때 마다 새로운 객체를 생성할 필요가 없다.
- 변경 불가능 클래스라면 이미 만들어둔 객체를 활용하거나, 만든 객체를 캐시해놓고 재사용하여 같은 객체가 불필요하게 거듭 생성되는 것을 방지할 수 있다.
- 경량(flyweight) 패턴과 유사한데 동일한 객체가 요청되는 일이 많고, 객체를 만드는 비용이 클 때 적용하면 성능을 크게 개선할 수 있다.
- 같은 객체를 반복해서 반환할 수 있으므로 어떤 시점에 어떤 객체가 얼마나 존재할지 정밀하게 제어가 가능하다. 이러한 기능을 갖춘 클래스를 개체 통제 클래스고 한다.
- 개체 통제 클래스를 작성하는 이유
  - 개체 수를 제어하면 싱글턴 패턴을 따를 수 있다.
  - 객체 생성이 불가능한 클래스를 만들 수도 있다.
  - 변경이 불가능한 클래스의 경우 두 개의 같은 객체가 존재하지 못하도록 할 수도 있다.

##### 3) 생성자와 달리 반환값 자료형의 하위 자료형 객체를 반환할 수 있다.

##### 4) 형인자 자료형(parameterized type) 객체를 만들 때 편하다.

#### 단점

##### 1) `public`이나 `protected`로 선언된 생성자가 없으므로 하위 클래스를 만들 수 없다.

##### 2) 정적 팩터리 메서가 다른 정적 메서드와 확연히 구분되지 않는다.


## Rule 2. 생성자 인자가 많을 때는 `Builder` 패턴 적용을 고려하라.


## Rule 3. `private` 생성자나 `enum` 자료형은 싱글턴 패턴을 따르도록 설계하라.

## Rule 4. 객체 생성을 막을 때는 `private` 생성자를 사용하라.

## Rule 5. 불필요한 객체는 만들지 말라.

## Rule 6. 유효기간이 지난 객체 참조는 폐기하라.

## Rule 7. 종료자 사용을 피하라.
