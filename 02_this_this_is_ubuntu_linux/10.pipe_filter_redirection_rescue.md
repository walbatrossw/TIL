# 파이프, 필터, 리디렉션

## 1. 파이프(Pipe)
- 두개의 프로그램을 연결해주는 연결통로의 의미
- `|` 문자를 사용
- 예)
  ```
  # ls -l /etc | more
  ```

## 2. 필터(Filter)
- 필요한 것만 걸러 주는 명령어
- `grep`, `tail`, `wc`, `sort`, `awk`, `sed` 등이 있음
- 주로 파이프와 같이 사용한다.
- 예)
  ```
  # ps -ef | grep bash
  ```

## 3. 리디렉션(Redirection)
- 표준 입출력의 방향을 바꿔줌
- 예)
  ```
  ls -l > list.txt
  sort < list.txt > out.txt
  ```

## 4. 프로세스, 데몬
- 정의 : 하드디스크에 저장된 실행코드(프로그램)가 메모리에 로딩되어 활성화 된 것을 의미
- 포그라운드 프로세스(Foreground Process)
  - 실행하면 화면에 나타나 사용자와 상호작용을 하는 프로세스
  - 대부분 응용프로그램을 말함
- 백그라운드 프로세스(Background Process)
  - 실행은 되었지만, 화면에는 나타나지 않고 실행되는 프로세스
  - 백신 프로그램, 서버 데몬
- 프로세스 번호
  - 각각의 프로세스에 할당된 고유번호를 의미, 실행될 때마다 번호는 달라진다.
- 작업번호
  - 현재 실행되고 있는 백그라운드 프로세스의 순차번호
- 부모 프로세스와 자식 프로세스
  - 모든 프로세스는 부모 프로세스를 가지고 있다.
  - 부모 프로세스를 kill하면 자식 프로세스도 자동으로 kill된다.
- 프로세스 관련 명령어
  - 현재 프로세스 상태를 확인하는 명령어 : `ps`
    ```
    # ps -ef | grep [프로세스 이름]
    ```
  - 프로세스를 강제로 종료하는 명령어 : `kill`
    ```
    kill -9 [프로세스번호]
    ```
  - 부모 프로세스와 자식 프로세스의 관계를 트리형태로 보여주는 명령어 : `pstree`
  - `&`: 백그라운드/포그라운드에서 동시에 사용할 수 있다.
    - 예)
      ```
      # gedit &
      ```

## 4. 서비스와 소켓
- 서비스 : 시스템과 독자점으로 구동되어 제공하는 프로세스를 말함
  - 예) 웹서버, DB서버, FTP서버
  - 실행 및 종료
    ```
    # systemctl start/stop/restart [서비스이름]
    ```
  - 서비스의 실행 스크립트 파일은 `/lib/systemd/system` 디렉토리에 `서비스이름.service`라는 이름으로 확인할 수 있다.
    - 예) Cron서비스 : `cron.service`
  - 부팅과 동시에 서비스의 자동 실행 여부를 지정할 수 있는데, 터미널에서 `systemctl list-unit-files` 명령을 실행하면 현재사용(enabled), 미사용(disabled)을 확인할 수 있고, `rcconf` 명령으로 설정도 가능하다.
- 소켓
  - 서비스는 항상 가동 / 소켓은 외부에서 특정 서비스를 요청할 경우 systemd가 구동, 요청이 끝나면 소켓도 종료
  - 소켓으로 설정된 서비스를 요청할 경우 처음 연결되는 시간이 서비스에 비해 약간 더 걸릴 수 있다. 예) 텔넷서버
  - 소켓과 관련된 스크립트 파일은 `/lib/systemd/system`디렉토리에 `소켓이름.socket`이라는 이름으로 존재한다.

## 5. 응급복구
- 시스템이 부팅되자 않을 경우
- root 비밀번호 분실시
  - GRUB 화면에서 `e`
  - linux에서 커서를 놓고 `end` 그리고 `init=/bin/bash`입력후 `Ctrl + x`
  - `whoami`명령어로 확인
  - `passwd`명령어로 비밀번호 변경시도, but 실패한다. 응급복구 모드이기 때문에 읽기전용으로 되어있다.
  - 읽기모드로 변경하기 위해 `# mount -o remount,rw /`명령어 입력
  - 다시 비밀번호 변경하면 비밀번호가 성공적으로 변경
- 실무에서는 GRUB 편집을 아무나 할수 없도록 해야한다.
