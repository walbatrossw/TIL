# SATA 장치와 SCSI장치의 구성

## Server 하드웨어 구성도
- VMware는 총 120개의 SATA하드디스크와 총 60개의 SCSI 하드디스크를 장착할 수 있다.
- PC용 : SATA는 4개까지, SATA 하나당 30개의 하드디스크 장착이 가능
  - SATA 0, SATA 1, SATA 2, SATA 3
- 서버용 : SCSI도 4개까지, SCSI 하나당 16개의 하드디스크 장착이 가능, 그러나 7번은 예약되어있으므로 실제로는 15개만 사용가능
  - 서버용 하드디스크의 파티션 구분
    ```
    ┌── SCSI 0
    |     └── SCSI 0:0
    |     |         ├── /dev/sda : 하드디스크 하나를 의미
    |     |         |        ├── /dev/sda1 : 보통 스왑영역
    |     |         |        ├── /dev/sda2 : 보통 /(root)영역
    |     |         |        ├── /dev/sda3
    |     |         |        └── /dev/sda4
    |     |         ├── /dev/sdb
    |     |         └── /dev/sdc
    |     ├── SCSI 0:1
    |     ├── SCSI 0:2
    |     ├── SCSI 0:3
    |     ├── ....
    |     └── SCSI 0:15
    |
    ├── SCSI 1
    ├── SCSI 2
    └── SCSI 3
    ```
## 하드디스크 추가해보기
- 하드디스크 1개 추가 하드웨어 구성
  - SCSI 0
    - SCSI 0:0 : 기존의 하드디스크
      - /dev/sda
        - /dev/sda1 : 스왑영역
        - /dev/sda2 : root영역
    - SCSI 0:1 : 물리적인 하드디스크 장착
      - /dev/sdb
        - /dev/sdb1 : 추가된 하드디스크 파티션
  - 장착된 디스크의 이름 : /dev/sdb
  - 논리적인 파티션 이름 : /dev/sdb1
- 파티션을 그냥 사용할 수 없으며 반드시 특정한 디렉토리에 마운트를 시켜야만 사용이 가능
- 다시말하자면 윈도우와 다르게 `/` 하위 디렉토리에 폴더를 생성하고 그 폴더에 하드디스크를 마운트시켜야 한다.
- 하드디스크 추가 해보기
  - VMware에서 하드디스크 추가
  - 터미널에서 하드디스크 추가되었는지 확인
    ```
    # ls /dev/sd*
    ```
  - 추가된 하드디스크 파티션 나누기
    - 파티션 처리를 하기 위한 명령어 : `fdisk`
      ```
      # fdisk /dev/sdb
      ```
    - 새로운 파티션 명령어 : `n`
    - 시작점 정하기 : 처음부터 시작, 2048 입력 or `Enter`
    - 끝점 정하기 : 끝까지 사용한다면 `Enter`
    - 파티션 확인 명령어 : `p`
    - 파티션 등록 명령어 : `w`
    - 파티션 포맷
      ```
      # mkfs.ext4 /dev/sdb1
      ```
    - 디렉토리 생성
      ```
      # mkdir /mydata
      ```
    - 새로 생성한 하드디스크 파티션 mount 명령어 : `mount [파티션] [디랙토리]`
      ```
      # mount /dev/sdb1 /mydata
      ```
    - 재부팅 mount 풀림방지 설정 : 주의해서 수정 (부팅안될수도 있음)
      ```
      # gedit /etc/fstab
      ```
      ```
      [파티션이름] [마운트할 폴더] [파일시스템] [옵션] [덤프] [패스]
      /dev/sdb1  /mydata ext4  defaults  0 0
      ```
